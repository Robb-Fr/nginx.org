<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE module SYSTEM "../../../../dtd/module.dtd">

<module name="Директивы модуля ngx_http_split_clients_module"
        link="/ru/docs/http/ngx_http_split_clients_module.html"
        lang="ru">

<section name="" id="summary">

<para>
Модуль ngx_http_split_clients_module создаёт переменные для
A/B split-тестирования.
</para>

</section>


<section name="Пример конфигурации" id="example">

<para>
<example>
http {
    split_clients "${remote_addr}AAA"  $variant {
                   0.5%                .one;
                   2.0%                .two;
                   *                   "";
    }

    server {
        location / {
            index  index${variant}.html;
</example>
</para>
</section>


<section name="Директивы" id="directives">

<directive name="split_clients">
<syntax>split_clients <value>$переменная1 $переменная2 { ... }</value></syntax>
<default>нет</default>
<context>http</context>

<para>
Директива создаёт переменную для A/B split-тестирования, например:
<example>
split_clients "${remote_addr}AAA"  $variant {
               0.5%                .one;
               2.0%                .two;
               *                   "";
}
</example>
Значение исходной строки переменных хэшируется с помощью CRC32.
В приведённом примере при значениях хэша от 0 до 21474836 (0.5%)
переменная $variant получит значение ".one".
При значениях хэша от 21474837 до 107374182 (2%) — ".two".
И при значениях хэша от 107374183 до 4294967297 — "".
</para>

</directive>

</section>

</module>
