<?xml version="1.0" encoding="utf-8"?>

<!DOCTYPE module SYSTEM "../../../../dtd/module.dtd">

<module name="Директивы модуля ngx_http_map_module"
        link="/ru/docs/http/ngx_http_map_module.html"
        lang="ru">

<section name="" id="summary">

<para>
Модуль ngx_http_map_module создаёт переменные, значение которых
зависят от значения других переменных.
</para>

</section>


<section name="Пример конфигурации" id="example">

<para>
<example>
    map  $http_host  $name  {
        hostnames;

        default          0;

        example.com      1;
        *.example.com    1;
        test.com         2;
        *.test.com       2;
        .site.com        3;
        wap.*            4;
    }
</example>
</para>

</section>


<section name="Директивы" id="directives">

<directive name="map">
<syntax>map <value>$переменная1 $переменная2 { ... }</value></syntax>
<default>нет</default>
<context>http</context>

<para>
Директива создаёт переменную, значение которой
зависит от значения исходной переменной.
Директива поддерживает три специальных параметра:
<list type="bullet">
<listitem>
default — задаёт значение для второй переменной, если значение
первой переменной не найдено.
</listitem>

<listitem>
hostnames — указывает, что в качестве исходных значений можно
использовать маску для первой или последней части имени хоста, например,
<example>
*.example.com  1;
example.*      1;
</example>
Вместо двух записей
<example>
example.com    1;
*.example.com  1;
</example>
можно использовать одну
<example>
.example.com   1;
</example>
</listitem>

<listitem>
include — включает файл со значениями.
Включений может быть несколько.
</listitem>

</list>
</para>

</directive>


<directive name="map_hash_max_size">
<syntax>map_hash_max_size <value>число</value></syntax>
<default>map_hash_max_size 2048</default>
<context>http</context>

<para>
Директива задаёт максимальный размер хэш-таблиц для переменных map.
Подробнее смотри в <link doc="../hash.xml">описании
настройки хэшей</link>.
</para> 

</directive>


<directive name="map_hash_bucket_size">
<syntax>map_hash_bucket_size <value>число</value></syntax>
<default>map_hash_bucket_size 32/64/128</default>
<context>http</context>
    
<para>
Директива задаёт размер корзины в хэш-таблицах для переменных map.
Значение по умолчанию зависит от размера строки кэша процессора.
Подробнее смотри в <link doc="../hash.xml">описании
настройки хэшей</link>.
</para>

</directive>

</section>

</module>
