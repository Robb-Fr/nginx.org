<?xml version="1.0"?>

<!DOCTYPE module SYSTEM "../../../../dtd/module.dtd">

<module name="Директивы модуля ngx_http_secure_link_module"
        link="/ru/docs/http/ngx_http_secure_link_module.html"
        lang="ru">

<section id="summary">

<para>
Модуль ngx_http_secure_link_module — это модуль проверяющий
правильность запрашиваемой ссылки (0.7.18+).
По умолчанию модуль не собирается, нужно разрешить его сборку
при конфигурировании параметром
<literal>--with-http_secure_link_module</literal>.
</para>

</section>


<section name="Пример конфигурации" id="example">

<para>
<example>
location /p/ {
    secure_link_secret   some_secret_word;

    if ($secure_link = "") {
        return 403;
    }
}
</example>
</para>

</section>


<section name="Директивы" id="directives">

<directive name="secure_link_secret">
<syntax><value>слово</value></syntax>
<default/>
<context>location</context>

<para>
Директива задаёт секретное слово для проверки правильности ссылки.
Полный URL защищённой ссылки вглядит так:
<example>
/prefix/<value>hash</value>/<value>ссылка</value>
</example>
где hash считается как
<example>
md5(ссылка, секретное_слово);
</example>
</para>

<para>
Префикс — произвольная строка, не включающая слэш.
</para>

</directive>

</section>


<section name="Встроенные переменные" id="variables">

<para>
<list type="bullet">

<listitem>
$secure_link, эта переменная равна ссылке выделенной из полного URL'а.
Если хэш неверный, то переменная равна пустой строке.
</listitem>

</list>
</para>

</section>

</module>
